diff --git a/CMakeLists.txt b/CMakeLists.txt
index 49de6e535e..64ae38e5f0 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -54,25 +54,25 @@ set(gRPC_INSTALL ${gRPC_INSTALL_default} CACHE BOOL
 # "module": build the dependency using sources from git submodule (under third_party)
 # "package": use cmake's find_package functionality to locate a pre-installed dependency
 
-set(gRPC_ZLIB_PROVIDER "module" CACHE STRING "Provider of zlib library")
+set(gRPC_ZLIB_PROVIDER "package" CACHE STRING "Provider of zlib library")
 set_property(CACHE gRPC_ZLIB_PROVIDER PROPERTY STRINGS "module" "package")
 
-set(gRPC_CARES_PROVIDER "module" CACHE STRING "Provider of c-ares library")
+set(gRPC_CARES_PROVIDER "package" CACHE STRING "Provider of c-ares library")
 set_property(CACHE gRPC_CARES_PROVIDER PROPERTY STRINGS "module" "package")
 
-set(gRPC_SSL_PROVIDER "module" CACHE STRING "Provider of ssl library")
+set(gRPC_SSL_PROVIDER "package" CACHE STRING "Provider of ssl library")
 set_property(CACHE gRPC_SSL_PROVIDER PROPERTY STRINGS "module" "package")
 
-set(gRPC_PROTOBUF_PROVIDER "module" CACHE STRING "Provider of protobuf library")
+set(gRPC_PROTOBUF_PROVIDER "package" CACHE STRING "Provider of protobuf library")
 set_property(CACHE gRPC_PROTOBUF_PROVIDER PROPERTY STRINGS "module" "package")
 
 set(gRPC_PROTOBUF_PACKAGE_TYPE "" CACHE STRING "Algorithm for searching protobuf package")
 set_property(CACHE gRPC_PROTOBUF_PACKAGE_TYPE PROPERTY STRINGS "CONFIG" "MODULE")
 
-set(gRPC_GFLAGS_PROVIDER "module" CACHE STRING "Provider of gflags library")
+set(gRPC_GFLAGS_PROVIDER "package" CACHE STRING "Provider of gflags library")
 set_property(CACHE gRPC_GFLAGS_PROVIDER PROPERTY STRINGS "module" "package")
 
-set(gRPC_BENCHMARK_PROVIDER "module" CACHE STRING "Provider of benchmark library")
+set(gRPC_BENCHMARK_PROVIDER "package" CACHE STRING "Provider of benchmark library")
 set_property(CACHE gRPC_BENCHMARK_PROVIDER PROPERTY STRINGS "module" "package")
 
 set(gRPC_USE_PROTO_LITE OFF CACHE BOOL "Use the protobuf-lite library")
@@ -760,7 +760,7 @@ add_custom_target(buildtests
 endif (gRPC_BUILD_TESTS)
 
 
-add_library(address_sorting
+add_library(address_sorting SHARED
   third_party/address_sorting/address_sorting.c
   third_party/address_sorting/address_sorting_posix.c
   third_party/address_sorting/address_sorting_windows.c
@@ -809,7 +809,7 @@ endif()
 
 if (gRPC_BUILD_TESTS)
 
-add_library(alts_test_util
+add_library(alts_test_util SHARED
   test/core/tsi/alts/crypt/gsec_test_util.cc
   test/core/tsi/alts/handshaker/alts_handshaker_service_api_test_lib.cc
 )
@@ -849,7 +849,7 @@ target_link_libraries(alts_test_util
 
 endif (gRPC_BUILD_TESTS)
 
-add_library(gpr
+add_library(gpr SHARED
   src/core/lib/gpr/alloc.cc
   src/core/lib/gpr/atm.cc
   src/core/lib/gpr/cpu_iphone.cc
@@ -978,7 +978,7 @@ if (gRPC_INSTALL)
 endif()
 
 
-add_library(grpc
+add_library(grpc SHARED
   src/core/lib/surface/init.cc
   src/core/lib/avl/avl.cc
   src/core/lib/backoff/backoff.cc
@@ -1450,7 +1450,7 @@ if (gRPC_INSTALL)
 endif()
 
 
-add_library(grpc_cronet
+add_library(grpc_cronet SHARED
   src/core/ext/transport/cronet/plugin_registry/grpc_cronet_plugin_registry.cc
   src/core/lib/surface/init.cc
   src/core/lib/avl/avl.cc
@@ -1855,7 +1855,7 @@ endif()
 
 if (gRPC_BUILD_TESTS)
 
-add_library(grpc_test_util
+add_library(grpc_test_util SHARED
   test/core/end2end/data/client_certs.cc
   test/core/end2end/data/server1_cert.cc
   test/core/end2end/data/server1_key.cc
@@ -2208,7 +2208,7 @@ endforeach()
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(grpc_test_util_unsecure
+add_library(grpc_test_util_unsecure SHARED
   src/core/ext/filters/client_channel/resolver/fake/fake_resolver.cc
   test/core/end2end/cq_verifier.cc
   test/core/end2end/fixtures/http_proxy_fixture.cc
@@ -2555,7 +2555,7 @@ endforeach()
 
 endif (gRPC_BUILD_TESTS)
 
-add_library(grpc_unsecure
+add_library(grpc_unsecure SHARED
   src/core/lib/surface/init.cc
   src/core/lib/surface/init_unsecure.cc
   src/core/lib/avl/avl.cc
@@ -2951,7 +2951,7 @@ endif()
 
 if (gRPC_BUILD_TESTS)
 
-add_library(reconnect_server
+add_library(reconnect_server SHARED
   test/core/util/reconnect_server.cc
 )
 
@@ -2993,7 +2993,7 @@ target_link_libraries(reconnect_server
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(test_tcp_server
+add_library(test_tcp_server SHARED
   test/core/util/test_tcp_server.cc
 )
 
@@ -3035,7 +3035,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(bm_callback_test_service_impl
+add_library(bm_callback_test_service_impl SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/echo.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/echo.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/echo.pb.h
@@ -3097,7 +3097,7 @@ endif (gRPC_BUILD_CODEGEN)
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(dns_test_util
+add_library(dns_test_util SHARED
   test/cpp/naming/dns_test_util.cc
 )
 
@@ -3141,7 +3141,7 @@ target_link_libraries(dns_test_util
 
 endif (gRPC_BUILD_TESTS)
 
-add_library(grpc++
+add_library(grpc++ SHARED
   src/cpp/client/insecure_credentials.cc
   src/cpp/client/secure_credentials.cc
   src/cpp/common/auth_property_iterator.cc
@@ -3512,7 +3512,7 @@ endif()
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_core_stats
+add_library(grpc++_core_stats SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/core/stats.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/core/stats.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/core/stats.pb.h
@@ -3566,7 +3566,7 @@ endif (gRPC_BUILD_CODEGEN)
 endif (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_error_details
+add_library(grpc++_error_details SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/status/status.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/status/status.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/status/status.pb.h
@@ -3638,7 +3638,7 @@ endif (gRPC_BUILD_CODEGEN)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_proto_reflection_desc_db
+add_library(grpc++_proto_reflection_desc_db SHARED
   test/cpp/util/proto_reflection_descriptor_database.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/reflection/v1alpha/reflection.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/reflection/v1alpha/reflection.grpc.pb.cc
@@ -3703,7 +3703,7 @@ endif (gRPC_BUILD_CODEGEN)
 endif (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_reflection
+add_library(grpc++_reflection SHARED
   src/cpp/ext/proto_server_reflection.cc
   src/cpp/ext/proto_server_reflection_plugin.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/reflection/v1alpha/reflection.pb.cc
@@ -3775,7 +3775,7 @@ endif()
 endif (gRPC_BUILD_CODEGEN)
 if (gRPC_BUILD_TESTS)
 
-add_library(grpc++_test_config
+add_library(grpc++_test_config SHARED
   test/cpp/util/test_config_cc.cc
 )
 
@@ -3821,7 +3821,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_test_util
+add_library(grpc++_test_util SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/channelz/channelz.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/channelz/channelz.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/channelz/channelz.pb.h
@@ -4040,7 +4040,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc++_test_util_unsecure
+add_library(grpc++_test_util_unsecure SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/health/v1/health.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/health/v1/health.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/health/v1/health.pb.h
@@ -4247,7 +4247,7 @@ endif (gRPC_BUILD_CODEGEN)
 
 endif (gRPC_BUILD_TESTS)
 
-add_library(grpc++_unsecure
+add_library(grpc++_unsecure SHARED
   src/cpp/client/insecure_credentials.cc
   src/cpp/common/insecure_create_auth_context.cc
   src/cpp/server/insecure_server_credentials.cc
@@ -4605,7 +4605,7 @@ endif()
 
 if (gRPC_BUILD_TESTS)
 
-add_library(grpc_benchmark
+add_library(grpc_benchmark SHARED
   test/cpp/microbenchmarks/helpers.cc
 )
 
@@ -4655,7 +4655,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpc_cli_libs
+add_library(grpc_cli_libs SHARED
   test/cpp/util/cli_call.cc
   test/cpp/util/cli_credentials.cc
   test/cpp/util/grpc_tool.cc
@@ -4724,7 +4724,7 @@ endif (gRPC_BUILD_CODEGEN)
 
 endif (gRPC_BUILD_TESTS)
 
-add_library(grpc_plugin_support
+add_library(grpc_plugin_support SHARED
   src/compiler/cpp_generator.cc
   src/compiler/csharp_generator.cc
   src/compiler/node_generator.cc
@@ -4789,7 +4789,7 @@ endif()
 
 
 if (gRPC_BUILD_CODEGEN)
-add_library(grpcpp_channelz
+add_library(grpcpp_channelz SHARED
   src/cpp/server/channelz/channelz_service.cc
   src/cpp/server/channelz/channelz_service_plugin.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/channelz/channelz.pb.cc
@@ -4861,7 +4861,7 @@ endif (gRPC_BUILD_CODEGEN)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(http2_client_main
+add_library(http2_client_main SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.h
@@ -4934,7 +4934,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(interop_client_helper
+add_library(interop_client_helper SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.pb.h
@@ -4993,7 +4993,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(interop_client_main
+add_library(interop_client_main SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.h
@@ -5068,7 +5068,7 @@ endif (gRPC_BUILD_CODEGEN)
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(interop_server_helper
+add_library(interop_server_helper SHARED
   test/cpp/interop/server_helper.cc
 )
 
@@ -5119,7 +5119,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(interop_server_lib
+add_library(interop_server_lib SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/empty.pb.h
@@ -5193,7 +5193,7 @@ endif (gRPC_BUILD_CODEGEN)
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(interop_server_main
+add_library(interop_server_main SHARED
   test/cpp/interop/interop_server_bootstrap.cc
 )
 
@@ -5240,7 +5240,7 @@ endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
 if (gRPC_BUILD_CODEGEN)
-add_library(qps
+add_library(qps SHARED
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.grpc.pb.cc
   ${_gRPC_PROTO_GENS_DIR}/src/proto/grpc/testing/messages.pb.h
@@ -5401,7 +5401,7 @@ endif()
 endif (gRPC_BUILD_CSHARP_EXT)
 if (gRPC_BUILD_TESTS)
 
-add_library(bad_client_test
+add_library(bad_client_test SHARED
   test/core/bad_client/bad_client.cc
 )
 
@@ -5449,7 +5449,7 @@ target_link_libraries(bad_client_test
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(bad_ssl_test_server
+add_library(bad_ssl_test_server SHARED
   test/core/bad_ssl/server_common.cc
 )
 
@@ -5490,7 +5490,7 @@ target_link_libraries(bad_ssl_test_server
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(end2end_tests
+add_library(end2end_tests SHARED
   test/core/end2end/end2end_tests.cc
   test/core/end2end/end2end_test_utils.cc
   test/core/end2end/tests/authority_not_supported.cc
@@ -5611,7 +5611,7 @@ target_link_libraries(end2end_tests
 endif (gRPC_BUILD_TESTS)
 if (gRPC_BUILD_TESTS)
 
-add_library(end2end_nosec_tests
+add_library(end2end_nosec_tests SHARED
   test/core/end2end/end2end_nosec_tests.cc
   test/core/end2end/end2end_test_utils.cc
   test/core/end2end/tests/authority_not_supported.cc
